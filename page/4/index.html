<!DOCTYPE html><html lang="zh-TW" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Kevin Liu's 部落格 || Technical || Travel - Life Documentation</title><meta name="author" content="Kevin Liu"><meta name="copyright" content="Kevin Liu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="👍👍👍👍👍">
<meta property="og:type" content="website">
<meta property="og:title" content="Kevin Liu&#39;s 部落格 || Technical || Travel">
<meta property="og:url" content="https://leozzmc.github.io/page/4/index.html">
<meta property="og:site_name" content="Kevin Liu&#39;s 部落格 || Technical || Travel">
<meta property="og:description" content="👍👍👍👍👍">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="https://leozzmc.github.io/img/me.jpg">
<meta property="article:author" content="Kevin Liu">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://leozzmc.github.io/img/me.jpg"><link rel="shortcut icon" href="/img/kevin3.png"><link rel="canonical" href="https://leozzmc.github.io/page/4/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-T4SFRRLLZ0"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-T4SFRRLLZ0');
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查詢的內容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":3,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '複製成功',
    error: '複製錯誤',
    noSupport: '瀏覽器不支援'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '剛剛',
    min: '分鐘前',
    hour: '小時前',
    day: '天前',
    month: '個月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: true,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Kevin Liu\'s 部落格 || Technical || Travel',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-07-27 16:21:07'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/style.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/me.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">61</div></a><a href="/tags/"><div class="headline">標籤</div><div class="length-num">71</div></a><a href="/categories/"><div class="headline">分類</div><div class="length-num">9</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首頁</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 找文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 歸檔</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 標籤</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分類</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 鏈結</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-language"></i><span> 語言:</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/en/"><i class="fa-fw fas fa-e"></i><span> English</span></a></li><li><a class="site-page child" href="/"><i class="fa-fw fa-c"></i><span> 中文</span></a></li></ul></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('/img/cover7.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="Kevin Liu's 部落格 || Technical || Travel"><img class="site-icon" src="https://i.imgur.com/P19VCm0.png"/><span class="site-name">Kevin Liu's 部落格 || Technical || Travel</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜尋</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首頁</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 找文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 歸檔</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 標籤</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分類</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 鏈結</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-language"></i><span> 語言:</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/en/"><i class="fa-fw fas fa-e"></i><span> English</span></a></li><li><a class="site-page child" href="/"><i class="fa-fw fa-c"></i><span> 中文</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">Kevin Liu's 部落格 || Technical || Travel</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/leozzmc" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:zzmczzmczzmc870125@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #e0ad5a;"></i></a><a class="social-icon" href="https://www.linkedin.com/in/kevin-liu087" target="_blank" title="LinkedIn"><i class="fa-brands fa-linkedin" style="color: #0373fc;"></i></a><a class="social-icon" href="https://www.youtube.com/channel/UC2AU_vpxPu0oKcgZl3UJSNg" target="_blank" title="Youtube"><i class="fa-brands fa-youtube" style="color: #dc1e1e;"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover right"><a href="/posts/421a206a.html" title="建立 Lambda 函數 URL 的步驟"><img class="post-bg" src="/img/AWS/Lambda_URL/cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="建立 Lambda 函數 URL 的步驟"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/421a206a.html" title="建立 Lambda 函數 URL 的步驟">建立 Lambda 函數 URL 的步驟</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">發表於</span><time datetime="2024-01-03T12:41:05.000Z" title="發表於 2024-01-03 20:41:05">2024-01-03</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AF%A6%E4%BD%9C%E7%B4%80%E9%8C%84/">實作紀錄</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/AWS/">AWS</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Lambda/">Lambda</a></span></div><div class="content">甚麼是 Lambda URL ?
官方定義: 函數 URL 是 Lambda 函數專用的 HTTP(S) 端點。您可以透過 Lambda 主控台或 Lambda API 建立及設定函數 URL。當您建立函數 URL 時，Lambda 會自動為您產生不重複的 URL 端點。函數 URL 一旦建立，其 URL 端點便永遠不會變更。

函數 URL 端點的格式如下：
1https://&lt;url-id&gt;.lambda-url.&lt;region&gt;.on.aws

要特別注意的是，某些region並不支援使用 function URL，這時可能就要用老方法: API Gateway + Lambda Integration
存取控制在建立 function URL 的時候可以透過 AuthType 參數，來決定 Lambda 如何對 funcion URL 的請求執行身分驗證或授 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/posts/b509904.html" title="橫向擴展ActiveMQ"><img class="post-bg" src="/img/ActiveMQ/ActiveMQ_Cover.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="橫向擴展ActiveMQ"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/b509904.html" title="橫向擴展ActiveMQ">橫向擴展ActiveMQ</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">發表於</span><time datetime="2023-12-18T20:04:20.000Z" title="發表於 2023-12-19 04:04:20">2023-12-19</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98/">學習筆記</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/AWS/">AWS</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/ActiveMQ/">ActiveMQ</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/MQ/">MQ</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Scaling/">Scaling</a></span></div><div class="content">Amazon MQAmzon MQ 上有託管 Active MQ 這個訊息佇列的服務，近期有碰到問題是問說，要怎麼樣在 Amazon MQ 上做 Horizontal Scaling，
首先簡單解釋一下 Vertical Scaling 跟 Horizontal Scaling 的差異。
Scaling意味著擴展，Vertical Scaling著重於單一實體的運算能力增強，所以Vertical Scaling可能會是更好的 CPU&#x2F;GPU,更大的記憶體容量等等，
以 AWS 服務來說，可能會是更換實例，MQ的話就會是從 t3.Micro 換成 m5.large

[+] 執行個體類型 - https://docs.aws.amazon.com/zh_tw/amazon-mq/latest/developer-guide/broker-instance-types.html

而 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/posts/613d9ed0.html" title="【學習筆記】OTA Update -1"><img class="post-bg" src="/img/OTA/OIG.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【學習筆記】OTA Update -1"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/613d9ed0.html" title="【學習筆記】OTA Update -1">【學習筆記】OTA Update -1</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">發表於</span><time datetime="2023-12-13T04:32:05.000Z" title="發表於 2023-12-13 12:32:05">2023-12-13</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98/">學習筆記</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/AWS/">AWS</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/IoT/">IoT</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/OTA/">OTA</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Firmware/">Firmware</a></span></div><div class="content">什麼是 OTA Update (Over The Air Updtae)?透過無線通訊去對設備進行軟體&#x2F;韌體更新
OTA 的流程
Notify
設備會被通知有擱置的OTA更新
設備可以選擇忽略更新或者接受更新以觸發下載


Download
設備通過各種支援的協定進行更新下載
更新包會下載到預先設定好的儲存區域
Ex. S3 Bucket


更新可能是全新的韌體映像或現有韌體的補丁


Verify
驗證更新包的有效性


Install
設備通過更新包開始更新（通常是通過 bootloader）成最新的韌體
安裝後可以執行檢查以驗證功能
設備將向 OTA 更新提供者報告韌體更新成功



主要分成這四個步驟
模組化 OTA 更新
模組化 OTA 由幾個小型函式庫和一個協調器(Orchestrator)組成。
每個 Lib 負責特定的子任務，例如通知待處理的 OTA 更新或透過 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/posts/22f14c54.html" title="【爬山紀錄】七星山主峰 + 東峰"><img class="post-bg" src="/img/Mountain1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【爬山紀錄】七星山主峰 + 東峰"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/22f14c54.html" title="【爬山紀錄】七星山主峰 + 東峰">【爬山紀錄】七星山主峰 + 東峰</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">發表於</span><time datetime="2023-11-19T09:09:43.000Z" title="發表於 2023-11-19 17:09:43">2023-11-19</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%88%AC%E5%B1%B1%E5%81%A5%E8%A1%8C/">爬山健行</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E5%8C%97%E9%83%A8/">北部</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E5%B0%8F%E7%99%BE%E5%B2%B3/">小百岳</a></span></div><div class="content">簡介由於生長在台北多年還沒去七星山主峰的三角點，趁著難得的好天氣出遊踩點
這次爬七星山的主要路線是從 小油坑登山口 -&gt; 七星山主峰 -&gt; 七星山東峰，接著原路返回到 小油坑停車場

七星山是台北市內最高的山，海拔達到 1120 公尺
小油坑地熱口地熱口附近硫磺味很重，但天氣冷其實靠近挺暖的
湧出的硫磺泉會沸騰冒泡
七星山主峰通往主峰的路上幾乎都是石頭階梯，但階梯路途中挺多陡上，建議攜帶登山杖

現在是11月的芒草季，但這裡風大，芒草都被吹得彎曲，但景色還是挺美

假日會很多登山客要來跟這根拍照，就自行考量要不要留個紀念了
七星山東峰主峰往東峰的路段只需再走 0.3K，可以選擇一次蒐集兩個峰頂。但從七星主峰到七星東峰的部分路段較為濕滑，建議穿有防滑的登山鞋來。
草叢順帶一提，一路上都有很多像是下面這樣，人可以通過的樹叢，如果透過離線地圖看是可以發現路的，而且也能發現有綁繩子，舊 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/posts/889a40ef.html" title="機群佈建(Fleet Provisioning) - 預先佈建裝置到 AWS IoT"><img class="post-bg" src="/img/OIG.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="機群佈建(Fleet Provisioning) - 預先佈建裝置到 AWS IoT"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/889a40ef.html" title="機群佈建(Fleet Provisioning) - 預先佈建裝置到 AWS IoT">機群佈建(Fleet Provisioning) - 預先佈建裝置到 AWS IoT</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">發表於</span><time datetime="2023-11-09T07:14:35.000Z" title="發表於 2023-11-09 15:14:35">2023-11-09</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AF%A6%E4%BD%9C%E7%B4%80%E9%8C%84/">實作紀錄</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/AWS/">AWS</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/IoT-Core/">IoT Core</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Certificate/">Certificate</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Device-Provisioning/">Device Provisioning</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Policy/">Policy</a></span></div><div class="content">簡介什麼是機群佈建(Fleet Provisioning)?機群佈建當中也有分成 要求佈建 （Provisioning by Claim） 還有 透過信任的使用者佈建 （Provisioning by Trusted User）
要求佈建裝置可以使用內嵌的佈建宣告憑證（Claim Certificate）(這是特殊用途的憑證) 和私有金鑰  來製造。如果這些憑證已向 AWS IoT 註冊，該服務可以將它們交換為裝置可用於一般操作的唯一裝置憑證。
透過信任的使用者佈建在許多情況下，如終端使用者或安裝技術人員等信任的使用者初次使用行動應用程式在其部署的位置設定裝置時，裝置會連線至 AWS IoT

在本篇文章中，主要會介紹透過 要求佈建 的方式來去進行機群佈建

要求佈建的流程
設置 - AWS IoT Core建立憑證以及公私鑰對產生用於佈建的憑證。

可以在 AWS IoT Console ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/posts/aws-iot-device-shadow.html" title="Hands-On Practice: AWS IoT Device Shadow"><img class="post-bg" src="/img/pepe_shadow.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hands-On Practice: AWS IoT Device Shadow"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/aws-iot-device-shadow.html" title="Hands-On Practice: AWS IoT Device Shadow">Hands-On Practice: AWS IoT Device Shadow</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">發表於</span><time datetime="2023-11-08T08:30:18.000Z" title="發表於 2023-11-08 16:30:18">2023-11-08</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AF%A6%E4%BD%9C%E7%B4%80%E9%8C%84/">實作紀錄</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/AWS/">AWS</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/IoT-Core/">IoT Core</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/IoT-Shadow/">IoT Shadow</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/MQTT/">MQTT</a></span></div><div class="content">Intro - What is AWS IoT Device Shadow?In real world, sometime it is difficult to get the actual device state in real time in such IoT scenarios.
A device shadow can overcome this challenge, Device Shadow can consider a virtual  virtual representation of a device which managed by the IoT Things resource created in AWS IoT Core.

The Shadow document is a JSON or a JavaScript notation doc that is use ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/posts/efc78ef4.html" title="Hands-On Practice: Amazon SNS Fan out to Amazon SQS"><img class="post-bg" src="/img/pepe5.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hands-On Practice: Amazon SNS Fan out to Amazon SQS"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/efc78ef4.html" title="Hands-On Practice: Amazon SNS Fan out to Amazon SQS">Hands-On Practice: Amazon SNS Fan out to Amazon SQS</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">發表於</span><time datetime="2023-10-24T02:18:53.000Z" title="發表於 2023-10-24 10:18:53">2023-10-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AF%A6%E4%BD%9C%E7%B4%80%E9%8C%84/">實作紀錄</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/AWS/">AWS</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/SNS/">SNS</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/SQS/">SQS</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Publish-Subscribe-Model/">Publish-Subscribe-Model</a></span></div><div class="content">IntroductionAmazon SNS offen works well with Amazon SQS, by subscribing SQS to SNS, the SNS service can push messages to SQS. This may eliminating the need to periodically check or “poll” for updates.
What is Amazon SQS?By official definition

Amazon SQS is a message queue service used by distributed applications to exchange messages through a polling model, and can be used to decouple sending and ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/posts/e7e295f6.html" title="Hands-On Practice: S3 Gateway Endpoints"><img class="post-bg" src="/img/pepe4.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hands-On Practice: S3 Gateway Endpoints"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/e7e295f6.html" title="Hands-On Practice: S3 Gateway Endpoints">Hands-On Practice: S3 Gateway Endpoints</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">發表於</span><time datetime="2023-10-23T04:32:05.000Z" title="發表於 2023-10-23 12:32:05">2023-10-23</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AF%A6%E4%BD%9C%E7%B4%80%E9%8C%84/">實作紀錄</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/AWS/">AWS</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/S3/">S3</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Endpoints/">Endpoints</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Gateway/">Gateway</a></span></div><div class="content">What is S3 Gateway Endpoints?
Let’s consider a scenario

How could your Lambda function access the content in the S3 bucket?

If you want a service to access the content in the S3 bucket, it usually go through VPC endpoint. S3 supports two types of VPC endpoint,each of which is Gateway endpoint and Interface endpoint


The diffeences between two types of VPC endpoints are listed below



S3 Gatewa ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/posts/f40d2e89.html" title="Lambda_layer 概念和實作"><img class="post-bg" src="/img/pepe3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Lambda_layer 概念和實作"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/f40d2e89.html" title="Lambda_layer 概念和實作">Lambda_layer 概念和實作</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">發表於</span><time datetime="2023-10-20T13:10:11.000Z" title="發表於 2023-10-20 21:10:11">2023-10-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AF%A6%E4%BD%9C%E7%B4%80%E9%8C%84/">實作紀錄</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/AWS/">AWS</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Lambda/">Lambda</a></span></div><div class="content">前言針對 Lambda 設定，絕大多數人一定碰過 ImportModuleError  所以各位可以跟著以下的情境，開一個一樣的 Lambda 環境逐步操作。
情境
Region: IAD(us-east-1)
Runtime: Python3.11
Lambda Name: “ITHomeLambdaFunction”
Lambda code1234567891011import json requestsdef lambda_handler(event, context):    # TODO implement    x = requests.get(&#x27;https://www.ntust.edu.tw/&#x27;)    print(x.text)    return &#123;        &#x27;statusCode&#x27;: 200,        &# ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/posts/a09fae.html" title="AWS Lambda知識整理 | 佈建並行 | 預留並行"><img class="post-bg" src="/img/PEPE2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="AWS Lambda知識整理 | 佈建並行 | 預留並行"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/a09fae.html" title="AWS Lambda知識整理 | 佈建並行 | 預留並行">AWS Lambda知識整理 | 佈建並行 | 預留並行</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">發表於</span><time datetime="2023-10-17T13:53:09.000Z" title="發表於 2023-10-17 21:53:09">2023-10-17</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AF%A6%E4%BD%9C%E7%B4%80%E9%8C%84/">實作紀錄</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/AWS/">AWS</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Lambda/">Lambda</a></span></div><div class="content">回顧前面有提及了 Lambda 的基本介紹、Lambda Runtime、權限配置 以及從日誌上觀察初始化時間以及函數執行時間。
最後我們有提到一個問題，那就是

如果我們用 AWS CLI 去調用 Lambda 函數，用 Terminal 一次開三個Tab同時調用我們的 Lambda 函數會發生什麼事？

實驗一 - 設置 Reserved Concurrency我們執行以下指令：
12345aws lambda invoke \    --function-name TestInvocations \    --cli-binary-format raw-in-base64-out \    --payload &#x27;&#123; &quot;name&quot;: &quot;test&quot; &#125;&#x27; \    response.json

事實上他都可以 ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/3/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/#content-inner">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/#content-inner">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/#content-inner">7</a><a class="extend next" rel="next" href="/page/5/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/me.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Kevin Liu</div><div class="author-info__description">👍👍👍👍👍</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">61</div></a><a href="/tags/"><div class="headline">標籤</div><div class="length-num">71</div></a><a href="/categories/"><div class="headline">分類</div><div class="length-num">9</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/leozzmc"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/leozzmc" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:zzmczzmczzmc870125@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #e0ad5a;"></i></a><a class="social-icon" href="https://www.linkedin.com/in/kevin-liu087" target="_blank" title="LinkedIn"><i class="fa-brands fa-linkedin" style="color: #0373fc;"></i></a><a class="social-icon" href="https://www.youtube.com/channel/UC2AU_vpxPu0oKcgZl3UJSNg" target="_blank" title="Youtube"><i class="fa-brands fa-youtube" style="color: #dc1e1e;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">🛫🛬</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/1f138bdd.html" title="刷題必會知識 | 樹 (Tree) | 基礎篇 | LeetCode 筆記"><img src="/img/LeetCode/tree/cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="刷題必會知識 | 樹 (Tree) | 基礎篇 | LeetCode 筆記"/></a><div class="content"><a class="title" href="/posts/1f138bdd.html" title="刷題必會知識 | 樹 (Tree) | 基礎篇 | LeetCode 筆記">刷題必會知識 | 樹 (Tree) | 基礎篇 | LeetCode 筆記</a><time datetime="2024-07-26T04:35:56.000Z" title="發表於 2024-07-26 12:35:56">2024-07-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/8cb54984.html" title="使用Stack來實現Queue | Easy | LeetCode#232. Implement Queue using Stacks"><img src="/img/LeetCode/232/cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用Stack來實現Queue | Easy | LeetCode#232. Implement Queue using Stacks"/></a><div class="content"><a class="title" href="/posts/8cb54984.html" title="使用Stack來實現Queue | Easy | LeetCode#232. Implement Queue using Stacks">使用Stack來實現Queue | Easy | LeetCode#232. Implement Queue using Stacks</a><time datetime="2024-07-25T05:07:24.000Z" title="發表於 2024-07-25 13:07:24">2024-07-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/6dfa2271.html" title="使用Queue來實現Stack | Easy | LeetCode#225. Implement Stack using Queues"><img src="/img/LeetCode/225/cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用Queue來實現Stack | Easy | LeetCode#225. Implement Stack using Queues"/></a><div class="content"><a class="title" href="/posts/6dfa2271.html" title="使用Queue來實現Stack | Easy | LeetCode#225. Implement Stack using Queues">使用Queue來實現Stack | Easy | LeetCode#225. Implement Stack using Queues</a><time datetime="2024-07-24T05:07:30.000Z" title="發表於 2024-07-24 13:07:30">2024-07-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/22a8b30b.html" title="刷題必會知識 | 佇列 (Queue) | LeetCode 筆記"><img src="/img/LeetCode/queue/cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="刷題必會知識 | 佇列 (Queue) | LeetCode 筆記"/></a><div class="content"><a class="title" href="/posts/22a8b30b.html" title="刷題必會知識 | 佇列 (Queue) | LeetCode 筆記">刷題必會知識 | 佇列 (Queue) | LeetCode 筆記</a><time datetime="2024-07-22T05:18:02.000Z" title="發表於 2024-07-22 13:18:02">2024-07-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/f9156e74.html" title="攀登富士山 | 行前準備與規劃紀錄 | 山屋預約"><img src="/img/Mountain/Mt.Fuji/cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="攀登富士山 | 行前準備與規劃紀錄 | 山屋預約"/></a><div class="content"><a class="title" href="/posts/f9156e74.html" title="攀登富士山 | 行前準備與規劃紀錄 | 山屋預約">攀登富士山 | 行前準備與規劃紀錄 | 山屋預約</a><time datetime="2024-07-12T06:31:03.000Z" title="發表於 2024-07-12 14:31:03">2024-07-12</time></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-comment-dots"></i><span>最新評論</span></div><div class="aside-list"><span>正在載入中...</span></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分類</span>
            <a class="card-more-btn" href="/categories/" title="檢視更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Deep-Dive/"><span class="card-category-list-name">Deep Dive</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/LeetCode%E7%AD%86%E8%A8%98/"><span class="card-category-list-name">LeetCode筆記</span><span class="card-category-list-count">29</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98/"><span class="card-category-list-name">學習筆記</span><span class="card-category-list-count">10</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98/Troubleshooting/"><span class="card-category-list-name">Troubleshooting</span><span class="card-category-list-count">1</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%AF%A6%E4%BD%9C%E7%B4%80%E9%8C%84/"><span class="card-category-list-name">實作紀錄</span><span class="card-category-list-count">13</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%8C%87%E4%BB%A4-%E5%B7%A5%E5%85%B7%E7%94%A8%E6%B3%95%E6%95%B4%E7%90%86/"><span class="card-category-list-name">指令/工具用法整理</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E7%88%AC%E5%B1%B1%E5%81%A5%E8%A1%8C/"><span class="card-category-list-name">爬山健行</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E8%AB%96%E6%96%87%E5%B0%8E%E8%AE%80/"><span class="card-category-list-name">論文導讀</span><span class="card-category-list-count">3</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>標籤</span></div><div class="card-tag-cloud"><a href="/tags/SQS/" style="font-size: 1.1em; color: #999">SQS</a> <a href="/tags/MQ/" style="font-size: 1.1em; color: #999">MQ</a> <a href="/tags/S3/" style="font-size: 1.1em; color: #999">S3</a> <a href="/tags/Hash-Table/" style="font-size: 1.23em; color: #999ea6">Hash Table</a> <a href="/tags/SNS/" style="font-size: 1.1em; color: #999">SNS</a> <a href="/tags/Binary-Search/" style="font-size: 1.1em; color: #999">Binary Search</a> <a href="/tags/Linked-List/" style="font-size: 1.5em; color: #99a9bf">Linked List</a> <a href="/tags/Array/" style="font-size: 1.17em; color: #999c9f">Array</a> <a href="/tags/%E5%B0%8F%E7%99%BE%E5%B2%B3/" style="font-size: 1.1em; color: #999">小百岳</a> <a href="/tags/Python/" style="font-size: 1.1em; color: #999">Python</a> <a href="/tags/IoT/" style="font-size: 1.1em; color: #999">IoT</a> <a href="/tags/Network/" style="font-size: 1.3em; color: #99a1ac">Network</a> <a href="/tags/Endpoints/" style="font-size: 1.1em; color: #999">Endpoints</a> <a href="/tags/hash-table/" style="font-size: 1.1em; color: #999">hash table</a> <a href="/tags/Publish-Subscribe-Model/" style="font-size: 1.1em; color: #999">Publish-Subscribe-Model</a> <a href="/tags/Firmware/" style="font-size: 1.1em; color: #999">Firmware</a> <a href="/tags/IoT-Core/" style="font-size: 1.17em; color: #999c9f">IoT Core</a> <a href="/tags/Linux/" style="font-size: 1.23em; color: #999ea6">Linux</a> <a href="/tags/5G/" style="font-size: 1.3em; color: #99a1ac">5G</a> <a href="/tags/Web/" style="font-size: 1.1em; color: #999">Web</a> <a href="/tags/exploit/" style="font-size: 1.1em; color: #999">exploit</a> <a href="/tags/IoT-Shadow/" style="font-size: 1.1em; color: #999">IoT Shadow</a> <a href="/tags/%E7%B6%B2%E8%B7%AF%E7%A8%8B%E5%BC%8F/" style="font-size: 1.1em; color: #999">網路程式</a> <a href="/tags/Medium/" style="font-size: 1.43em; color: #99a6b9">Medium</a> <a href="/tags/Travel/" style="font-size: 1.1em; color: #999">Travel</a> <a href="/tags/complexity/" style="font-size: 1.1em; color: #999">complexity</a> <a href="/tags/O-RAN/" style="font-size: 1.1em; color: #999">O-RAN</a> <a href="/tags/Two-Pointers/" style="font-size: 1.1em; color: #999">Two Pointers</a> <a href="/tags/Stack/" style="font-size: 1.43em; color: #99a6b9">Stack</a> <a href="/tags/hiking/" style="font-size: 1.1em; color: #999">hiking</a> <a href="/tags/3GPP/" style="font-size: 1.1em; color: #999">3GPP</a> <a href="/tags/Lambda/" style="font-size: 1.37em; color: #99a4b2">Lambda</a> <a href="/tags/Buffer-Overflow/" style="font-size: 1.1em; color: #999">Buffer Overflow</a> <a href="/tags/Device-Provisioning/" style="font-size: 1.1em; color: #999">Device Provisioning</a> <a href="/tags/Penetration-Testing/" style="font-size: 1.1em; color: #999">Penetration Testing</a> <a href="/tags/PowerShell/" style="font-size: 1.1em; color: #999">PowerShell</a> <a href="/tags/Gateway/" style="font-size: 1.1em; color: #999">Gateway</a> <a href="/tags/Certificate/" style="font-size: 1.17em; color: #999c9f">Certificate</a> <a href="/tags/Tree-Traversal/" style="font-size: 1.1em; color: #999">Tree Traversal</a> <a href="/tags/VNF/" style="font-size: 1.1em; color: #999">VNF</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>歸檔</span><a class="card-more-btn" href="/archives/" title="檢視更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">七月 2024</span><span class="card-archive-list-count">11</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/06/"><span class="card-archive-list-date">六月 2024</span><span class="card-archive-list-count">16</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/05/"><span class="card-archive-list-date">五月 2024</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/01/"><span class="card-archive-list-date">一月 2024</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/12/"><span class="card-archive-list-date">十二月 2023</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/11/"><span class="card-archive-list-date">十一月 2023</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/10/"><span class="card-archive-list-date">十月 2023</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/08/"><span class="card-archive-list-date">八月 2023</span><span class="card-archive-list-count">1</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>網站資訊</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章數目 :</div><div class="item-count">61</div></div><div class="webinfo-item"><div class="item-name">已執行時間 :</div><div class="item-count" id="runtimeshow" data-publishDate="2023-06-18T01:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站訪客數 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站總訪問量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最後更新時間 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-07-27T08:21:06.636Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2024 By Kevin Liu</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主題 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="簡繁轉換">EN</button><button id="darkmode" type="button" title="淺色和深色模式轉換"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="單欄和雙欄切換"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="設定"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到頂部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/typed.js/dist/typed.umd.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  if (true) {
    typedJSFn.init(["蹲的越低","腳就越酸"])
  } else {
    document.getElementById("subtitle").textContent = "蹲的越低"
  }
}
typedJSFn.run(subtitleType)</script><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'dark'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
  }

  btf.addModeChange('mermaid', runMermaid)

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[圖片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[連結]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[程式碼]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const findTrueUrl = (array) => {
    Promise.all(array.map(item =>
      fetch(item.url).then(resp => resp.json()).then(data => {
        const urlArray = data.body.match(/(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?/ig)
        if (data.user.login === 'utterances-bot') {
          return urlArray.pop()
        } else {
          return urlArray.shift()
        }
      })
    )).then(res => {
        array = array.map((i,index)=> {
          return {
            ...i,
            url: res[index]
          }
        })

        saveToLocal.set('github-newest-comments', JSON.stringify(array), 10/(60*24))
        generateHtml(array)
    });
  }

  const getComment = () => {
    fetch('https://api.github.com/repos/leozzmc/Blog_Reply/issues/comments?sort=updated&direction=desc&per_page=6&page=1',{
      "headers": {
        Accept: 'application/vnd.github.v3.html+json'
      }
    })
      .then(response => response.json())
      .then(data => {
        const githubArray = data.map(item => {
          return {
            'avatar': item.user.avatar_url,
            'content': changeContent(item.body_html),
            'nick': item.user.login,
            'url': item.issue_url,
            'date': item.updated_at,
            'githubUrl': item.html_url
          }
        })
        findTrueUrl(githubArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "無法獲取評論，請確認相關配置是否正確"
      })
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '沒有評論'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('github-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script data-pjax src="/self/btf.js"></script><script data-pjax src="/self/tw_en.js"></script><script id="canvas_nest" defer="defer" color="34,34,34" opacity="0.8" zIndex="-1" count="350" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="false" data-text="👍,👾,💊,🧪,👁️" data-fontsize="15px" data-random="false" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜尋</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  資料庫載入中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜尋文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>